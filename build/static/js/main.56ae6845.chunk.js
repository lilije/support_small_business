(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,n){e.exports=n(49)},36:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(15),r=n.n(o),u=n(2),s=n(11),l=n(25),i=n(12),m=function(e){return Promise.reject({code:"network-issue",err:e})},p=function(e){return e.json().then((function(e){return Promise.reject(e)}))},f=function(e,t){var n={instruction:e,imagePath:t};return function(e){return(t=n,fetch("/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({imagePath:t.imagePath,instruction:t.instruction})}).catch(m).then((function(e){return e.ok?e.json():p(e)}))).then((function(t){e(function(e){return{type:"ADD_POST",post:e}}(t))})).catch((function(e){console.log(e.code)}));var t}},E=function(e){return function(t){return function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(m).then((function(e){if(!e.ok)return p(e)}))}(e).then((function(){t(function(e){return{type:"ADD_USER",username:e}}(e))})).catch((function(e){console.log(e.code)}))}},h=function(){return function(e){return fetch("/logout",{method:"POST"}).catch(m).then((function(e){if(!e.ok)return p(e)})).then((function(){e({type:"LOG_OUT"})})).catch((function(e){console.log(e.code)}))}},d=function(){var e=[];return function(t){return fetch("/posts",{method:"GET"}).catch(m).then((function(e){return e.ok?e.json():p(e)})).then((function(n){e=n.posts,t(function(e){return{type:"RECEIVE_POSTS",posts:e}}(e))})).catch((function(e){console.log(e.code)}))}},g={posts:[],selectedPost:{id:"001",author:"Cafe De Casa",couponCode:"FR6bwx1q",imagePath:"https://images.pexels.com/photos/6267/menu-restaurant-vintage-table.jpg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",instruction:"Your coupon value is $5."},username:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return{posts:[].concat(Object(i.a)(e.posts),[t.post]),selectedPost:e.selectedPost,username:e.username};case"CHANGE_POST":return{posts:Object(i.a)(e.posts),selectedPost:t.post,username:e.username};case"ADD_USER":return{posts:Object(i.a)(e.posts),selectedPost:e.selectedPost,username:t.username};case"LOG_OUT":return{posts:Object(i.a)(e.posts),selectedPost:e.selectedPost,username:null};case"RECEIVE_POSTS":return{posts:Object(i.a)(t.posts),selectedPost:e.selectedPost,username:e.username};default:return e}},O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,j=Object(s.d)(b,O(Object(s.a)(l.a))),v=(n(36),n(10)),P=n(7),S=n(8),y=(n(37),Object(P.g)((function(){var e=Object(a.useState)(""),t=Object(S.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(S.a)(r,2),l=s[0],i=s[1],m=Object(a.useState)(""),p=Object(S.a)(m,2),E=p[0],h=p[1],d=Object(P.f)(),g=Object(u.b)();return c.a.createElement("div",{className:"new-post"},c.a.createElement(v.b,{to:"/",style:{textDecoration:"none"}},c.a.createElement("p",{className:"go-back"},"Go Back to Home Page")),c.a.createElement("h2",null,"Create New Post"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=(e=e.split("?")[0]).split("."),n=t[t.length-1];return-1!==["jpg","jpeg","tiff","png","gif","bmp"].indexOf(n)}(n)?(g(f(l,n)),d.push("/")):h("please input a valid image address")}},c.a.createElement("label",{htmlFor:"image"},"Image"),c.a.createElement("input",{type:"text",id:"image",name:"image",placeholder:"put your image link e.g. https://images.pexels.com/photos/6267/menu-restaurant-vintage-table.jpg",onChange:function(e){h(""),o(e.target.value)}}),E&&c.a.createElement("p",null,E),c.a.createElement("label",{htmlFor:"instruction"},"Coupon Value"),c.a.createElement("textarea",{id:"instruction",name:"instruction",placeholder:"please input your coupon value and instruction..",onChange:function(e){i(e.target.value)}}),c.a.createElement("input",{type:"submit",value:"Submit",className:"submit"})))}))),N=(n(39),function(){return c.a.createElement("footer",null,c.a.createElement("p",null,"NEU Student: Zhong Liu"))}),w=(n(40),function(){return c.a.createElement("header",null,c.a.createElement("h1",null,"Coupons"),c.a.createElement("span",null,"Support Small Businesses"))}),C=(n(41),function(){var e=Object(u.c)((function(e){return e.selectedPost}));return c.a.createElement("div",{className:"image-display"},c.a.createElement("img",{src:e.imagePath,alt:"popular"}),c.a.createElement("div",{className:"detail"},c.a.createElement("p",null,e.author),c.a.createElement("p",null,c.a.createElement("span",null,"Coupon Code")," : ",e.couponCode),c.a.createElement("p",null,c.a.createElement("span",null,"Instruction")," : ",e.instruction)))}),_=(n(42),function(){var e=Object(a.useState)(""),t=Object(S.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(S.a)(r,2),l=s[0],i=s[1],m=Object(u.b)();return c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),!function(e){return e.match(/dog|\s/g)}(n)?i(""):i("Please input valid username"),m(E(n))}},c.a.createElement("input",{type:"text",className:"user-name",placeholder:"Your business name e.g. In-N-Out Burger",onChange:function(e){i(""),o(e.target.value)}}),c.a.createElement("button",{className:"user-login",type:"submit"},"Business Login"),l&&c.a.createElement("p",null,l))}),k=(n(43),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.username}));return c.a.createElement("form",{className:"logout-form",onSubmit:function(t){t.preventDefault(),e(h())}},c.a.createElement("span",null,"Hi, ",t),c.a.createElement(v.b,{to:"/createPage"},c.a.createElement("button",{className:"user-create"},"Create New Post")),c.a.createElement("button",{className:"user-logout",type:"submit"},"Log Out"))}),D=(n(44),function(e){var t=Object(u.b)();return c.a.createElement("li",{onClick:function(){return t({type:"CHANGE_POST",post:e.post})}}," ",e.post.author," ")}),T=(n(45),function(){var e=Object(u.c)((function(e){return e.posts}));return c.a.createElement("div",{className:"list"},c.a.createElement("h2",null,"Small Businesses"),c.a.createElement("ul",null,Object.keys(e).map((function(t){return c.a.createElement(D,{key:t,id:t,post:e[t]})}))))}),x=(n(46),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.username}));return Object(a.useEffect)((function(){e(d())})),c.a.createElement("main",null,c.a.createElement("div",{className:"first-row"},t?c.a.createElement(k,null):c.a.createElement(_,null)),c.a.createElement("div",{className:"main-row"},c.a.createElement(T,null),c.a.createElement(C,null)))}),B=(n(47),function(){return c.a.createElement("div",{className:"HomePage"},c.a.createElement(x,null))}),I=(n(48),function(){return c.a.createElement(v.a,null,c.a.createElement(w,null),c.a.createElement(P.c,null,c.a.createElement(P.a,{path:"/homePage"},c.a.createElement(B,null)),c.a.createElement(P.a,{path:"/createPage"},c.a.createElement(y,null)),c.a.createElement(P.a,{path:"/"},c.a.createElement(B,null))),c.a.createElement(N,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(u.a,{store:j},c.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.56ae6845.chunk.js.map